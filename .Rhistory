x_axis="Value (Ksh)", y_axis="Count",
title="Unpaired: Kenya - Average Household Income")
# Has your household income changed since your connection to minigrid power?
plot_func(df=post_clean, var_name="household_income_change",
var_type="non_cont", lgd="Change",
plot_title="Change in Household Income",
plot_type="pie")
# How much do you pay per month to charge your mobile phone?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="phone_charge_cost", var_type="non_cont",
subplot_type="pie", lgd_title = "Costs",
title="Unpaired: Phone Charging Cost")
# Paired
compare_paired(data=paired_clean,
var_name="phone_charge_cost",
lgd_title="Costs",
plot_title="Paired: Phone Charging Cost")
# What is approximate monthly cost of energy used strictly for charging appliances?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="applicances_charging_cost", var_type="non_cont",
subplot_type="pie", lgd_title = "Costs",
title="Unpaired: Appliances Charging Cost")
# Paired
compare_paired(data=paired_clean,
var_name="applicances_charging_cost",
lgd_title="Costs",
plot_title="Paired: Appliances Charging Cost")
# What is the approximate monthly cost of energy used strictly for cooking?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="cooking_energy_cost", var_type="non_cont",
subplot_type="pie", lgd_title = "Costs",
title="Unpaired: Cooking Energy Cost")
# Paired
compare_paired(data=paired_clean,
var_name="cooking_energy_cost",
lgd_title="Costs",
plot_title="Paired: Cooking Energy Cost")
# How much do you pay monthly for kerosene used only in kerosene lamps?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="kerosene_lamps_cost", var_type="non_cont",
subplot_type="pie", lgd_title = "Costs",
title="Unpaired: Kerosene Lamps Cost")
# Paired
compare_paired(data=paired_clean,
var_name="kerosene_lamps_cost",
lgd_title="Costs",
plot_title="Paired: Kerosene Lamps Cost")
# Are any household members business owners?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="business_owners_binary", var_type="non_cont",
subplot_type="pie", lgd_title = "Own a Business?",
title="Unpaired: Household Business Ownership")
# Paired
compare_paired(data=paired_clean,
var_name="business_owners_binary",
lgd_title="Own a Business?",
plot_title="Paired: Household Business Ownership")
# Is this business recent (started after connection to minigrid power?)
plot_func(df=post_clean, var_name="business_recent",
var_type="non_cont", lgd="Recent?",
plot_title="Recent Business Ownership",
plot_type="pie")
# If this business is new, do you consider this new business a result of having access to minigrid power?
plot_func(df=post_clean, var_name="business_use_minigrid",
var_type="non_cont", lgd="Recent?",
plot_title="Business, A Result From Mini-Grid",
plot_type="pie")
# Is this business, clinic, school still in operation?
plot_func(df=ci_clean, var_name="operation_status",
var_type="non_cont", lgd = "Status",
plot_title="C&I - Type",
plot_type="pie")
# Please select your business type
plot_func(df=ci_clean, var_name="business_type",
var_type="non_cont", lgd = "Business Type",
plot_title="C&I - Type",
plot_type="pie")
## What is your average monthly household income?
ctr <- "nigeria"
country_df <- paired_clean %>% filter(country_post == ctr)
paired_testing(country_df, var_name="avg_household_income",
test_type = "ttest", plot_diff=TRUE,
remove_outliers = TRUE,
x_axis="Value (â‚¦ Naira)", y_axis="Count",
plt_title="Nigeria - Income Differences")
# community_reg(df=country_df,
#               col_name="avg_household_income", dep="V1",
#               title="Avg. Household Income Differences",
#               exclude_outliers = TRUE, outliers = "feature",
#               var_type="ratio", calc_diff = TRUE)
#
# # Nigerian Women
# gdr <- "female"
# women_paired <- country_df %>% filter(gender_post == gdr)
# paired_testing(women_paired, var_name="avg_household_income",
#                test_type = "ttest", plot_diff=TRUE)
#
# # Nigerian Men
# gdr <- "male"
# men_paired <- country_df %>% filter(gender_post == gdr)
# paired_testing(men_paired, var_name="avg_household_income",
#                test_type = "ttest", plot_diff=TRUE)
ctr <- "kenya"
country_df <- paired_clean %>% filter(country_post == ctr)
paired_testing(country_df, var_name="avg_household_income",
test_type = "ttest", plot_diff=TRUE,
remove_outliers = TRUE,
x_axis="Value (Ksh)", y_axis="Count",
plt_title="Kenya - Income Differences")
# community_reg(df=country_df,
#               col_name="avg_household_income", dep="V1",
#               title="Avg. Household Income Differences",
#               exclude_outliers = TRUE, outliers = "feature",
#               var_type="ratio", calc_diff = TRUE)
#
# # Nigerian Women
# gdr <- "female"
# women_paired <- country_df %>% filter(gender_post == gdr)
# paired_testing(women_paired, var_name="avg_household_income",
#                test_type = "ttest", plot_diff=TRUE)
#
# # Nigerian Men
# gdr <- "male"
# men_paired <- country_df %>% filter(gender_post == gdr)
# paired_testing(men_paired, var_name="avg_household_income",
#                test_type = "ttest", plot_diff=TRUE)
## Has your household income changed since your connection to mini-grid power?
community_reg(df=post_enc,
col_name="household_income_change", dep="1",
title="Household Income Increase by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = FALSE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
# For businesses or shop owners only: Since connection to Renewvia mini-grid, have you seen any change in your weekly or monthly earnings?
community_reg(df=ci_enc,
col_name="earnings_change", dep="1",
title="C&I Earnings Increase by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = FALSE,
diff_type="direction", customer_type="ci",
y_axis= "C&I")
# Are any household members business owners?
paired_testing(paired_enc, var_name="business_owners_binary",
test_type = "mcnemar", plot_diff=FALSE)
community_reg(df=paired_enc,
col_name="business_owners_binary", dep="1",
title="Household Business Onwership by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
community_reg(df=paired_enc,
col_name="business_owners_binary", dep="1",
title="Household Business Onwership by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
## Has there been a change in the number of females in your household who attend school full time since connection to minigrid power?
# Check for increase
community_reg(df=post_enc,
col_name="girls_schooling_change", dep="1",
var_type="categorical", customer_type="hs",
exclude_outliers = TRUE, outliers = "feature",
y_axis= "Households",
title="Increase in Girls' School Enrollment by Community")
## Has there been a change in the number of males in your household who attend school FULL TIME since connection to minigrid power?
# Check for increase
community_reg(df=post_enc,
col_name="boys_schooling_change", dep="1",
var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Households",
title="Increase in Boys' School Enrollment by Community")
community_reg(df=paired_enc,
col_name="water_collection_school_aged", dep="-1",
title="Water Collection Responsibility (School-Aged) by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
community_reg(df=paired_enc,
col_name="water_collection_school_aged", dep="-1",
title="Water Collection Responsibility (School-Aged) by Community",
#exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
community_reg(df=paired_enc,
col_name="water_collection_school_aged", dep="-1",
title="Water Collection Responsibility (School-Aged) by Community",
#exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
## Community Paired Differences
# Directional
community_reg(df=paired_enc,
col_name="cooking_fuel_collection_time", dep="-1",
var_type="categorical",
calc_diff = TRUE, diff_type = "direction",
#exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Households",
title="Decrease (Direction) in
Cooking Fuel Collection Time by Community")
# Magnitude
community_reg(df=paired_enc,
col_name="cooking_fuel_collection_time",
dep="target", var_type="ratio",
calc_diff = TRUE, diff_type = "magnitude",
#exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Sum of Differences",
title="Decrease (Magnitude) in
Cooking Fuel Collection Time by Community")
## Community Paired Differences
# Directional
community_reg(df=paired_enc,
col_name="cooking_fuel_collection_time", dep="-1",
var_type="categorical",
calc_diff = TRUE, diff_type = "direction",
exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Households",
title="Decrease (Direction) in
Cooking Fuel Collection Time by Community")
# Magnitude
community_reg(df=paired_enc,
col_name="cooking_fuel_collection_time",
dep="target", var_type="ratio",
calc_diff = TRUE, diff_type = "magnitude",
exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Sum of Differences",
title="Decrease (Magnitude) in
Cooking Fuel Collection Time by Community")
# If you answered yes to adding new workers, how many new employees are female?
community_reg(df=ci_enc,
col_name="workforce_change_female",
dep="V1", var_type="ratio",
#exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="New Female Workers Change by Community")
# If you answered yes to adding new workers, how many new employees are female?
community_reg(df=ci_enc,
col_name="workforce_change_female",
dep="V1", var_type="ratio",
#exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="New Female Workers Change by Community")
# If you answered yes to adding new workers, how many new employees are female?
community_reg(df=ci_enc,
col_name="workforce_change_female",
dep="V1", var_type="ratio",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="New Female Workers Change by Community")
## Since connection to Renewvia mini-grid, have your hours of operation changed at all?
community_reg(df=ci_enc,
col_name="operations_hours_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in Operation Hours by Community")
## Since connection to Renewvia mini-grid, have your hours of operation changed at all?
community_reg(df=ci_enc,
col_name="operations_hours_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in Operation Hours by Community")
# Since connection to Renewvia mini-grid, have you had any change in number of workers/employees at your place of work?
community_reg(df=ci_enc,
col_name="workforce_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in C&I's Workforce by Community")
# Does your community currently have outdoor community lights?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="community_lights", var_type="non_cont",
subplot_type="pie",
lgd_title = "Present?",
title="Unpaired: Presence of Community Lights")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="community_lights_pre",
var2="community_lights_post",
lgd_title ="Present?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Presence of Community Lights")
# Paired
compare_paired(data=paired_clean,
var_name="community_lights",
lgd_title="Present?",
plot_title="Paired: Change in Presence of Community Lights")
# Does your home have exterior lighting?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="home_exterior_lights", var_type="non_cont",
subplot_type="pie",
lgd_title = "Does the home have exterior lights?",
title="Unpaired: Presence of Home Exterior Lights")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="home_exterior_lights_pre",
var2="home_exterior_lights_post",
lgd_title ="Present?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Presence of Home Exterior Lights")
# Paired
compare_paired(data=paired_clean,
var_name="home_exterior_lights",
lgd_title="Does the home have exterior lights?",
plot_title="Paired: Change in Presence of Home Exterior Lights")
community_reg(df=paired_enc,
col_name="community_lights", dep="1",
title="Community Lights",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
community_reg(df=paired_enc,
col_name="business_owners_binary", dep="1",
title="Household Business Onwership by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
paired_testing(paired_enc, var_name="unsafe_due_to_theft",
test_type = "mcnemar", plot_diff=FALSE)
# Does your community currently have outdoor community lights?
paired_testing(paired_enc, var_name="community_lights",
test_type = "mcnemar", plot_diff=FALSE)
community_reg(df=paired_enc,
col_name="community_lights", dep="1",
title="Community Lights",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
paired_testing(paired_enc, var_name="home_exterior_lights",
test_type = "mcnemar", plot_diff=FALSE)
community_reg(df=paired_enc,
col_name="home_exterior_lights", dep="1",
title="Home Exterior Lights",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
# What makes you feel the most unsafe? Testing for Potentiel Theft only
community_reg(df=paired_enc,
col_name="unsafe_due_to_theft", dep="-1",
title="Decrease in Feeling Unsafe Due to Theft",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
# Are any household members business owners?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="business_owners_binary", var_type="non_cont",
subplot_type="pie", lgd_title = "Own a Business?",
title="Unpaired: Household Business Ownership")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="business_owners_binary_pre",
var2="business_owners_binary_post",
lgd_title ="Own a Business?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Household Business Ownership")
# Paired
compare_paired(data=paired_clean,
var_name="business_owners_binary",
lgd_title="Own a Business?",
plot_title="Paired: Change in Household Business Ownership")
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="non_cont", plot_title="No. of New Health Services",
plot_type="pie")
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="non_cont", plot_title="No. of New Health Services",
plot_type="pie", lgd="No. of Service")
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="non_cont", plot_title="No. of New Health Services",
plot_type="pie", lgd="No. of Service", char_remove = 0)
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="non_cont", plot_title="No. of New Health Services",
plot_type="pie", lgd="No. of Health Services", char_remove = 0)
# # How safe do you feel outside your home when it is dark?
print("All")
paired_testing(paired_enc, var_name="phone_charge_cost",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Difference in Pre-Post Phone Charging Cost")
#
paired_testing(paired_enc, var_name="applicances_charging_cost",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Difference in Pre-Post Phone Charging Cost")
# Phone Charging
# Appliance, Cooking, Kerosene
# post_enc$clinic_refrigeration_access <- as.factor(post_enc$clinic_refrigeration_access)
# post_enc$better_access_health_minigrid <- as.factor(post_enc$better_access_health_minigrid)
cross_tab <- table(post_enc$clinic_refrigeration_access,
post_enc$better_access_health_minigrid)
cross_tab
## Since connection to Renewvia mini-grid, have your hours of operation changed at all?
community_reg(df=ci_enc,
col_name="operations_hours_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in Operation Hours by Community")
View(projects)
## Since connection to Renewvia mini-grid, have your hours of operation changed at all?
community_reg(df=ci_enc,
col_name="operations_hours_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in Operation Hours by Community")
# Regression - Pre-Post Differences
community_reg(df=paired_enc,
col_name="clean_drinking_water", dep="1",
var_type="categorical",
calc_diff = TRUE,diff_type="direction",
# exclude_outliers = TRUE,
customer_type="hs", y_axis= "Households",
title="Increase in Access to clean drinking water by Community")
# Regression - Pre-Post Differences
community_reg(df=paired_enc,
col_name="clean_drinking_water", dep="1",
var_type="categorical",
calc_diff = TRUE,diff_type="direction",
exclude_outliers = TRUE,
customer_type="hs", y_axis= "Households",
title="Increase in Access to clean drinking water by Community")
# Do you have a source for clean drinking water?
paired_testing(paired_enc, var_name="clean_drinking_water",
test_type = "mcnemar", plot_diff=FALSE)
# # How safe do you feel outside your home when it is dark?
print("All")
paired_testing(paired_enc, var_name="feel_safe_dark",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="All - Difference in Pre-Post Safety Scores")
## Subgroup Analysis - Country
# Nigeria
print("Nigeria")
ctr <- 1
country_paired <- paired_enc %>% filter(country_post == ctr)
paired_testing(country_paired, var_name="feel_safe_dark",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Nigeria - Difference in Pre-Post Safety Scores")
# Kenya
print("Kenya")
ctr <- 2
country_paired <- paired_enc %>% filter(country_post == ctr)
paired_testing(country_paired, var_name="feel_safe_dark",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Kenya - Difference in Pre-Post Safety Scores")
## Subgroup Analysis - Gender
# Women
print("Women")
gdr <- 1
gender_paired <- paired_enc %>% filter(gender_post == gdr)
paired_testing(gender_paired, var_name="feel_safe_dark",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Women - Difference in Pre-Post Safety Scores")
# Men
print("Men")
gdr <- 2
gender_paired <- paired_enc %>% filter(gender_post == gdr)
paired_testing(gender_paired, var_name="feel_safe_dark",
test_type = "sign", plot_diff=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Men - Difference in Pre-Post Safety Scores")
# What makes you feel the most unsafe?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="feel_unsafe_reasons", var_type="non_cont",
subplot_type="pie", lgd_title = "Reasons",
title="Unpaired: Reasons for Feeling unsafe")
# Paired
compare_paired(data=paired_clean,
var_name="feel_unsafe_reasons",
lgd_title="Reasons",
plot_title="Paired: Reasons for Feeling unsafe")
table(paired_clean$feel_unsafe_reasons_pre,
paired_clean$feel_unsafe_reasons_post)
as.data.frame.table(table(paired_clean$feel_unsafe_reasons_pre,
paired_clean$feel_unsafe_reasons_post)
)
## Has your household income changed since your connection to mini-grid power?
community_reg(df=post_enc,
col_name="household_income_change", dep="1",
title="Household Income Increase by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff = FALSE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
View(customer_info)
