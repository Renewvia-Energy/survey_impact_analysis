# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="phone_charge_location", var_type="non_cont",
subplot_type="pie", lgd_title = "Places",
title="Unpaired: Location of Phone Charging")
# Paired
compare_paired(data=paired_clean,
var_name="phone_charge_location",
lgd_title="Places",
plot_title="Paired: Location of Phone Charging")
# How far must you travel to charge your mobile phone?
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="phone_charge_travel_distance", var_type="non_cont",
subplot_type="bar_simple", lgd_title = "Distances",
title="Unpaired: Travel Distance to Charge Phone",
char_remove=NULL)
# Paired
compare_paired(data=paired_clean,
var_name="phone_charge_travel_distance",
lgd_title="Time Intervals",
plot_title="Paired: Travel Distance to Charge Phone")
## How far must you travel to obtain your water supply?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="water_collection_travel_distance", var_type="non_cont",
subplot_type="bar", lgd_title = "Distances",
title="Travel Distance for Water Collection",
char_remove=NULL)
# Paired
compare_paired(data=paired_clean,
var_name="water_collection_travel_distance",
lgd_title="Time Intervals",
plot_title="Paired: Travel Distance for Water Collection")
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="water_collection_time",
var_type="non_cont",
subplot_type="bar_simple",
lgd_title="Time Intervals",
title="Unpaired: Water Collection Time")
# Paired
compare_paired(data=paired_clean,
var_name="water_collection_time",
lgd_title="Time Intervals",
plot_title="Paired: Water Collection Time")
## What is your main source of energy for cooking?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean, lgd_title ="Types",
var_name="cooking_energy_sources", var_type="non_cont",
subplot_type="pie",
title="Unpaired: Cooking Energy Sources")
# Paired
compare_paired(data=paired_clean,
var_name="cooking_energy_sources",
lgd_title="Types",
plot_title="Paired: Cooking Energy Sources")
##  How long does the cooking fuel collection process take on a daily basis?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="cooking_fuel_collection_time",
var_type="non_cont",
subplot_type="bar_simple",
lgd_title="Time Intervals",
title="Unpaired: Cooking Fuel Collection Time")
# Paired
compare_paired(data=paired_clean,
var_name="cooking_fuel_collection_time",
lgd_title="Time Intervals",
plot_title="Paired: Cooking Fuel Collection Time")
# Has school performance changed since connection to minigrid?
plot_func(df=post_clean, var_name="school_performance_change",
var_type="non_cont", lgd = "Change",
plot_title="Unpaired: Household - Academic Performance",
plot_type="pie")
# Paired
plot_func(df=paired_clean, var_name="school_performance_change",
var_type="non_cont", lgd = "Change",
plot_title="Paired: Household - Academic Performance",
plot_type="pie")
plot_func(df=schools_clean, var_name="school_performance",
var_type="non_cont", lgd = "Change",
plot_title="Schools - Academic Performance",
plot_type="pie")
# Since connection to Renewvia minigrid, have your hours of operation changed at all?
plot_func(df=ci_clean, var_name="operations_hours_change",
var_type="non_cont", lgd="Change",
plot_title="Change in C&I Business Hours",
plot_type="pie")
plot_func(df=ci_clean, var_name="business_hours_increase",
var_type="non_cont", lgd="By how much?",
plot_title="C&I Added Operation Hours",
plot_type="pie")
# Since connection to Renewvia mingrid, have you had any change in number of workers/employees at your place of work?
plot_func(df=business_clean, var_name="workforce_change",
var_type="non_cont", lgd="Change",
plot_title="Change in C&I Workforce",
plot_type="pie")
# Have you added any new products or services since connection to Renewvia minigrid?
plot_func(df=ci_clean, var_name="ci_offering_change",
var_type="non_cont", lgd="Change",
plot_title="Change in C&I Products/Services",
plot_type="pie")
## What is your primary power source? Binarized as renewable vs. non-renewable sources (Diesel, Petrol, Kerosene)
paired_testing(paired_enc, var_name="power_sources_unclean",
test_type = "mcnemar", plot_diff=FALSE)
community_reg(df=paired_enc,
col_name="power_sources_unclean", dep="-1",
title="Power Source (Non-Renewable) by Community",
exclude_outliers = TRUE, outliers = "feature",
var_type="categorical", calc_diff =TRUE,
diff_type="direction", customer_type="hs",
y_axis= "Households")
consumption_reg(df = paired_enc, reg_type ="logistic",
dep= "power_sources_unclean",
ind="avg_mon_consumption_period",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Pre-Post Period (kwH)",
y_axis="Unclean Power Sources",
log_direction = -1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
paired_testing(paired_enc, var_name = "appliances_count",
plot_diff = TRUE,
test_type="ttest", remove_outliers=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Difference in Pre-Post House Appliances")
consumption_reg(df = paired_enc, reg_type ="logistic",
dep= "appliances_count",
ind="avg_mon_consumption_period",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Pre-Post Period (kwH)",
y_axis="No. of Appliances",
log_direction = 1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
## How many hours of light per day do you currently have at home?
reg_temp <- paired_enc %>% filter(!light_hours_current_pre %in% c(46, 25) |
!light_hours_current_post %in% c(200))
paired_testing(reg_temp, var_name = "light_hours_current",
plot_diff = TRUE,
test_type="ttest",
remove_outliers=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Difference in Pre-Post House Light Hours")
ctr <- "nigeria"
print(ctr)
country_df <- reg_temp %>% filter(country_post == 1)
paired_testing(country_df, var_name = "light_hours_current",
plot_diff = TRUE,
test_type="ttest", remove_outliers=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Nigeria: Difference in Pre-Post House Light Hours")
#country_df[, c("light_hours_current_pre", "light_hours_current_post")]
ctr <- "kenya"
print(ctr)
country_df <- reg_temp %>% filter(country_post == 2)
paired_testing(country_df, var_name = "light_hours_current",
plot_diff = TRUE,
test_type="ttest", remove_outliers=TRUE,
x_axis="Differences", y_axis="Count",
plt_title="Kenya: Difference in Pre-Post House Light Hours")
# Has school performance changed since connection to minigrid?
community_reg(df=post_enc,
col_name="school_performance_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="hs", y_axis= "Households",
title="Households - Increase in Academic Performace by Community")
# Found an undesired effect
consumption_reg(df = post_enc, reg_type ="logistic",
dep= "school_performance_change",
ind="avg_mon_consumption_period",
#calc_diff=FALSE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Pre-Post Period (kwH)",
y_axis="Households - School Performance Change",
log_direction = 1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
consumption_reg(df = post_enc, reg_type ="logistic",
dep= "school_performance_change",
ind="avg_mon_consumption_cum",
#calc_diff=FALSE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kwH)",
y_axis="Households - School Performance Change",
log_direction = 1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
## Have you seen a change in overall school performance?
community_reg(df=schools_enc,
col_name="school_performance", dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="school", y_axis= "Schools",
title="Schools - Increase in Academic Performace by Community")
## Since connection to Renewvia mini-grid, have your hours of operation changed at all?
community_reg(df=ci_enc,
col_name="operations_hours_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Increase in Operation Hours by Community")
consumption_reg(df = ci_enc, reg_type ="logistic",
dep= "operations_hours_change",
ind="avg_mon_consumption_cum",
#calc_diff=FALSE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kwH)",
y_axis="Hours of Operations Change",
log_direction = 1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
# Since connection to Renewvia mini-grid, have you had any change in number of workers/employees at your place of work?
community_reg(df=business_enc,
col_name="workforce_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="business", y_axis= "Businesses",
title="Increase in C&I's Workforce by Community")
consumption_reg(df = business_enc, reg_type ="logistic",
dep= "workforce_change",
ind="avg_mon_consumption_cum",
#calc_diff=FALSE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kwH)",
y_axis="Workforce Change",
log_direction = 1,
exclude_outliers = TRUE, outliers = "feature",
title="Individual Directional Change vs Consumption")
# Have you added any new products or services since connection to Renewvia minigrid?
community_reg(df=ci_enc,
col_name="ci_offering_change",
dep="1", var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
customer_type="ci", y_axis= "C&I",
title="Newly Added Offerings by Community")
consumption_reg(df=ci_enc, reg_type ="logistic",
dep= "ci_offering_change", ind="avg_mon_consumption_cum",
#calc_diff=FALSE, diff_type = "direction",
exclude_outliers = TRUE, outliers = "feature",
x_axis="Avg. Monthly Energy Consumption Cumulative (kwH)",
y_axis="Product Offering Change", log_direction = 1,
title="Newly Added Offerings vs. Energy Consumption")
## What is your source of water?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="water_source", var_type="non_cont",
subplot_type="pie", lgd_title = "Sources",
title="Unpaired: Water Sources",
char_remove=NULL)
# Paired
compare_paired(data=paired_clean,
var_name="water_source",
lgd_title="Sources",
plot_title="Paired: Water Sources")
# Do you have a source for clean drinking water?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="clean_drinking_water", var_type="non_cont",
subplot_type="pie",
lgd_title = "Accessible?",
title="Unpaired: Breakdown of Clean Drinking Water Access")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="clean_drinking_water_pre",
var2="clean_drinking_water_post",
lgd_title ="Accessible?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Breakdown of Clean Drinking Water Access")
# Paired
compare_paired(data=paired_clean,
var_name="clean_drinking_water",
lgd_title="Accessible?",
plot_title="Paired: Chnage in Clean Drinking Water Access")
# What is the source for clean drinking water?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="clean_drinking_water_source", var_type="non_cont",
subplot_type="pie",
lgd_title = "Do you have clean drinking water?",
title="Unpaired: Clean Drinking Water Sources")
# Paired
compare_paired(data=paired_clean,
var_name="clean_drinking_water_source",
lgd_title="Do you have clean drinking water?",
plot_title="Paired: Clean Drinking Water Sources")
# How many kerosene lamps do you currently have in your household?
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="kerosene_lamps_count", var_type="cont",
subplot_type="hist", exclude_outliers = TRUE,
title="Unpaired: No. of Kerosene Lamps",
char_remove=c(24))
# Has the number of kerosene lamps in your household changed since connection to minigrid?
plot_func(df=post_clean, var_name="kerosene_lamp_usage_change", lgd ="Change",
var_type="non_cont", plot_title="Kerosene Lamps Usage",
plot_type="pie")
# # Does your Health Center have access to electricity?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="clinic_electricity_access", var_type="non_cont",
subplot_type="pie",
lgd_title = "Electrified?",
title="Unpaired: Breakdown of Clinic Access To Electricity")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="clinic_electricity_access_pre",
var2="clinic_electricity_access_post",
lgd_title ="Electrified?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Breakdown of of Clinic Access To Electricity")
# Paired
compare_paired(data=paired_clean,
var_name="clinic_electricity_access",
lgd_title="Electrified?",
plot_title="Paired: Change in Clinic Access To Electricity")
## How close is the nearest Health Center / Clinic
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="clinic_travel_distance", var_type="non_cont",
subplot_type="pie",
lgd_title = "Distances",
title="Unpaired: Clinic Travel Distance")
# Paired
compare_paired(data=paired_clean,
var_name="clinic_travel_distance",
lgd_title="Distances",
plot_title="Paired: Clinic Travel Distance")
# Does your Health Center / Clinic have access to refrigeration?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="clinic_refrigeration_access", var_type="non_cont",
subplot_type="pie",
lgd_title = "Has refrigeration?",
title="Unpaired: Clinic Access to Refrigeration")
# Paired
generic_compare(data=paired_clean, var_type="non_cont",
var1="clinic_refrigeration_access_pre",
var2="clinic_refrigeration_access_post",
lgd_title ="Has refrigeration?",
var1_title="Pre", var2_title="Post",
subplot_type="pie",
plot_title="Paired: Breakdown of of Clinic Access to Refrigeration")
# Paired
compare_paired(data=paired_clean,
var_name="clinic_refrigeration_access",
lgd_title="Has refrigeration?",
plot_title="Paired: Change in Clinic Access to Refrigeration")
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="non_cont", plot_title="No. of New Health Services",
plot_type="pie", lgd="No. of Health Services", char_remove = 0)
# What is the Clinic / Hospital able to offer or provide due to connection to Renewvia minigrid that it wasnt able to offer before?
plot_func(df=ci_clean, var_name="health_offering_change_count",
var_type="cont", plot_title="No. of New Health Services",
plot_type="hist", char_remove = 0)
# What were those added services?
wait <- sum(ci_clean$shorter_wait, na.rm = TRUE)
vaccines <- sum(ci_clean$vaccine_cold_storage, na.rm = TRUE)
patients <- sum(ci_clean$more_patients_treated, na.rm = TRUE)
hours <- sum(ci_clean$clinic_longer_hours, na.rm = TRUE)
vals <- c(wait, vaccines, patients, hours)
# creating matrix
tab <- as.data.frame(as.matrix(vals),
row.names = c("Shorter.Wait.Times",
"Vaccines.Cold.Storage",
"More.Patients",
"Longer.Hours"))
setnames(tab, old = c('V1'),
new = c("Count"))
# t(tab)
tab
# Do you have a source for clean drinking water?
paired_testing(paired_enc, var_name="clean_drinking_water",
test_type = "mcnemar", plot_diff=FALSE)
# Regression - Pre-Post Differences
community_reg(df=paired_enc,
col_name="clean_drinking_water", dep="1",
var_type="categorical",
calc_diff = TRUE,diff_type="direction",
exclude_outliers = TRUE,
customer_type="hs", y_axis= "Households",
title="Increase in Access to clean drinking water by Community")
consumption_reg(df=paired_enc,  reg_type ="logistic",
dep="clean_drinking_water", ind="avg_mon_consumption_period",
exclude_outliers = TRUE, outliers = "feature",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kWh)",
y_axis="Access Change", log_direction = 1,
title="Access To Clean Drinking Water vs. Energy Consumption")
## How many kerosene lamps do you currently use in your household?
paired_testing(paired_enc, var_name="kerosene_lamps_count",
test_type = "ttest", x_axis="Differences", y_axis="Count",
plt_title="Difference in Pre-Post Kerosone Lamps",
plot_diff=TRUE, remove_outliers = TRUE)
community_reg(df=paired_enc,
col_name="kerosene_lamps_count", dep="-1",
title="Difference in Kerosene Lamps by Community",
var_type="categorical",
calc_diff = TRUE, diff_type="direction",
exclude_outliers = TRUE,
customer_type="hs", y_axis= "Households")
# Differences in period
consumption_reg(df = paired_enc, reg_type ="linear",
dep= "kerosene_lamps_count",
ind="avg_mon_consumption_period",
calc_diff=TRUE, diff_type="magnitude",
exclude_outliers = TRUE, outliers = "dependent",
to_remove = c(0),
# threshold = -4, threshold_bound = "higher",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="Usage Change",
title="Difference Kersone Lamps Use vs. Consumption")
# Post use
consumption_reg(df = post_enc, reg_type ="linear",
dep= "kerosene_lamps_count",
ind="avg_mon_consumption_cum",
#calc_diff=TRUE, diff_type="magnitude",
exclude_outliers = TRUE, outliers = "dependent",
to_remove = c(0),
# threshold = -4, threshold_bound = "higher",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="No. of Kerosene Lamps",
title="Kerosene Use vs. Consumption")
consumption_reg(df=paired_enc,  reg_type ="logistic",
dep="kerosene_lamps_count", ind="avg_mon_consumption_period",
exclude_outliers = TRUE, outliers = "feature",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="Usage Change (Decrease)", log_direction = -1,
title="Kerosene Lamps Usage vs. Energy Consumption")
community_reg(df=post_enc,
col_name="kerosene_lamp_usage_change", dep="-1",
var_type="categorical",
exclude_outliers = TRUE, outliers = "feature",
title="Decrease in Kerosene Lamps Usage by Community",
customer_type="hs", y_axis= "Households")
consumption_reg(df=post_enc,  reg_type ="logistic",
dep="kerosene_lamp_usage_change", ind="avg_mon_consumption_cum",
exclude_outliers = TRUE, outliers = "feature",
#calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="Usage Change (Decrease)", log_direction = -1,
title="Kerosene Lamps Usage vs. Energy Consumption")
## For clinics or health services only: Since connection to Renewvia mini-grid, have your health service offerings changed in any of the following ways: (select all that apply).
community_reg(df=clinic_enc,
col_name="health_offering_change_count", dep="V1",
exclude_outliers = TRUE, outliers = "feature",
title="New Health Services Offered in Communities",
var_type="ratio", to_remove =c(0),
customer_type="clinic", y_axis= "Clinics")
clinic_enc$health_add <- ifelse(clinic_enc$health_offering_change_count > 0, 1, 0)
consumption_reg(df=clinic_enc,  reg_type ="logistic",
dep="health_add",
ind="avg_mon_consumption_cum",
exclude_outliers = TRUE, outliers = "feature",
#calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kWh)",
y_axis="Health Services (Increase)", log_direction = 1,
title="Health Service Offering vs. Consumption")
## Does your Health Center / Clinic have access to electricity?
paired_testing(paired_enc, var_name="clinic_electricity_access",
test_type = "mcnemar", plot_diff=FALSE)
consumption_reg(df=paired_enc,  reg_type ="logistic",
dep="clinic_electricity_access",
ind="avg_mon_consumption_period",
exclude_outliers = TRUE, outliers = "feature",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="Access Change (Increase)", log_direction = 1,
title="Clinic's Electricity Access vs. Consumption")
## Does your Health Center / Clinic have access to refrigeration?
paired_testing(paired_enc, var_name="clinic_refrigeration_access",
test_type = "mcnemar", plot_diff=FALSE)
consumption_reg(df=paired_enc,  reg_type ="logistic",
dep="clinic_refrigeration_access",
ind="avg_mon_consumption_period",
exclude_outliers = TRUE, outliers = "feature",
calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption In Period (kWh)",
y_axis="Access Change (Increase)", log_direction = 1,
title="Clinic's Refrigeration Access vs. Consumption")
# Do you feel that you have better access to health services because of connection to minigrid?
community_reg(df=post_enc,
col_name="better_access_health_minigrid",
dep="1", var_type="categorical",
exclude_outliers = TRUE,
#  outliers = "feature",
title="Better Healthcare Access by Community",
customer_type="hs", y_axis= "Households")
consumption_reg(df=post_enc,  reg_type ="logistic",
dep="better_access_health_minigrid",
ind="avg_mon_consumption_cum",
exclude_outliers = TRUE, outliers = "feature",
#calc_diff=TRUE, diff_type = "direction",
x_axis="Avg. Monthly Energy Consumption Cumulative (kWh)",
y_axis="Access Change (Increase)", log_direction = 1,
title="Better Access To Healthcare vs. Consumption")
# How safe do you feel outside your home when it is dark?
# Unpaired
compare_pre_post(df_pre=initial_pre, df_post=post_clean,
var_name="feel_safe_dark", var_type="non_cont",
subplot_type="bar_simple", lgd_title = "Scores",
title="Unpaired: Feeling Safe When Dark")
# Paired
compare_paired(data=paired_clean,
var_name="feel_safe_dark",
lgd_title="Score",
plot_title="Paired: Feeling Safe When Dark")
for(i in 1: 5) {
safe_i <- paired_enc %>% filter(feel_safe_dark_pre == i)
compare_paired(data=safe_i,
var_name="feel_safe_dark",
lgd_title=paste("Scores When Equal to ", i),
plot_title="Paired: Feeling Safe When Dark")
}
